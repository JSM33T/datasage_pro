<ng-container *ngIf="token(); else loginScreen">
	<main class="page-wrapper">
		<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm px-3">
			<div class="container-fluid">
				<span class="navbar-brand fs-5 fw-semibold">Document RAG Ai Agent</span>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
					aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse justify-content-end" id="mainNav">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" routerLink="">
								<i class="bi bi-file-earmark-text me-1"></i> Home
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" routerLink="documents">
								<i class="bi bi-file-earmark-text me-1"></i> Document
							</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" routerLink="masterchat">
								<i class="bi bi-chat me-1"></i> Chat
							</a>
						</li>
						<!-- <li class="nav-item">
							<a class="nav-link" routerLink="masterchat">
								<i class="bi bi-chat me-1"></i> Master Chat
							</a>
						</li> -->
						<li class="nav-item">
							<button class="nav-link text-danger btn btn-link" data-bs-toggle="modal"
								data-bs-target="#logoutModal">
								<i class="bi bi-box-arrow-right"></i> Logout
							</button>
						</li>

					</ul>
				</div>
			</div>
		</nav>

		<div class="container py-4">
			<router-outlet></router-outlet>
		</div>
	</main>
</ng-container>

<ng-template #loginScreen>
	<div class="d-flex flex-column justify-content-center align-items-center vh-100 bg-light text-center px-3">
		<h2 class="mb-4">Enter Access Key</h2>
		<input class="form-control mb-3 text-center" type="password" [value]="password()"
			(input)="password.set($any($event.target).value)" (keydown.enter)="login()" placeholder="Password"
			style="max-width: 320px;" />
		<button class="btn btn-primary" (click)="login()" [disabled]="loading()">Login</button>
		<div class="text-danger mt-3" *ngIf="error()">{{ error() }}</div>
	</div>
</ng-template>


<div class="modal fade" id="logoutModal" tabindex="-1" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Confirm Logout</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				Are you sure you want to log out?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-danger" (click)="confirmLogout()">Logout</button>
			</div>
		</div>
	</div>
</div>